-- H2 2.3.232;
;             
CREATE USER IF NOT EXISTS "SA" SALT '8979d634564a0800' HASH '1f85f8a17699173d9810b92ebbf3478a03910ce35b902ef23ae939fe110268c0' ADMIN;         
CREATE CACHED TABLE "PUBLIC"."CLIENT"(
    "ID" UUID NOT NULL,
    "CLIENT_ID" CHARACTER VARYING(255) NOT NULL,
    "CLIENT_SECRET" CHARACTER VARYING(255) NOT NULL,
    "CREATED_DATE" TIMESTAMP(6) NOT NULL,
    "LAST_MODIFIED_DATE" TIMESTAMP(6) NOT NULL,
    "REDIRECT_URI" CHARACTER VARYING(255) NOT NULL,
    "SCOPE" CHARACTER VARYING(255) NOT NULL
);     
ALTER TABLE "PUBLIC"."CLIENT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7" PRIMARY KEY("ID");       
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.CLIENT;  
INSERT INTO "PUBLIC"."CLIENT" VALUES
(UUID '3de324ca-cc6c-4eee-9890-bd076f8ad098', 'admin-client-id', '$2a$12$40ulvRdrXkyEszgVHD/kEOdZTEzJpnrM7JN0WqGzoFkNJ3eSLRrm.', TIMESTAMP '2025-10-12 20:03:40.681888', TIMESTAMP '2025-10-12 20:03:40.681888', 'http://localhost:8080/login/oauth2/code/bank-wise-client-oidc', 'ADMIN'),
(UUID '2c7b4045-9ffd-4a5d-b2b2-e4cd1327ef9e', 'postman-client', '$2a$12$i.wdvKDXBlRimxwa0.CWVe7HBlQS/VAka9kYMEDBxIlFALln5STxS', TIMESTAMP '2025-10-12 20:04:48.500076', TIMESTAMP '2025-10-12 20:04:48.500076', 'http://localhost:9090/login/oauth2/code/bank-wise-client-oidc', 'USER');  
CREATE CACHED TABLE "PUBLIC"."CLIENT_ACCOUNT"(
    "ID" UUID NOT NULL,
    "CREATED_DATE" TIMESTAMP(6) NOT NULL,
    "LAST_MODIFIED_DATE" TIMESTAMP(6) NOT NULL,
    "LEGAL_ENTITY_NUMBER" CHARACTER VARYING(11) NOT NULL,
    "LOGIN" CHARACTER VARYING(100) NOT NULL,
    "NAME" CHARACTER VARYING(100) NOT NULL,
    "PASSWORD" CHARACTER VARYING(200) NOT NULL
); 
ALTER TABLE "PUBLIC"."CLIENT_ACCOUNT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_C" PRIMARY KEY("ID");               
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.CLIENT_ACCOUNT;          
INSERT INTO "PUBLIC"."CLIENT_ACCOUNT" VALUES
(UUID '76f04321-1a2d-4b6a-af85-8738a86b5666', TIMESTAMP '2025-10-12 20:04:53.065343', TIMESTAMP '2025-10-12 20:04:53.065343', '59964669020', 'postman@postman.com', 'Posterman User', '$2a$12$s0iKvfLdTJ6OX9l4tG7XsurbDKQdA2FNvYlOffmHGUacB/2n8Xqae');          
CREATE CACHED TABLE "PUBLIC"."CLIENT_ACCOUNT_SCOPE"(
    "CLIENT_ACCOUNT_ID" UUID NOT NULL,
    "SCOPES" CHARACTER VARYING(255)
);         
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.CLIENT_ACCOUNT_SCOPE;    
INSERT INTO "PUBLIC"."CLIENT_ACCOUNT_SCOPE" VALUES
(UUID '76f04321-1a2d-4b6a-af85-8738a86b5666', 'READ'),
(UUID '76f04321-1a2d-4b6a-af85-8738a86b5666', 'DELETE'),
(UUID '76f04321-1a2d-4b6a-af85-8738a86b5666', 'UPDATE'),
(UUID '76f04321-1a2d-4b6a-af85-8738a86b5666', 'WRITE');       
CREATE CACHED TABLE "PUBLIC"."TRANSACTION_ACCOUNT"(
    "ID" UUID NOT NULL,
    "CREATED_DATE" TIMESTAMP(6) NOT NULL,
    "TRANSACTION_TYPE" INTEGER NOT NULL,
    "TRANSACTION_VALUE" NUMERIC(38, 2) NOT NULL,
    "CLIENT_ACCOUNT_ID" UUID
);         
ALTER TABLE "PUBLIC"."TRANSACTION_ACCOUNT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8" PRIMARY KEY("ID");          
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.TRANSACTION_ACCOUNT;     
ALTER TABLE "PUBLIC"."CLIENT" ADD CONSTRAINT "PUBLIC"."UKBFJDOY2DPUSSYLQ7G1S3S1TN8" UNIQUE NULLS DISTINCT ("CLIENT_ID");      
ALTER TABLE "PUBLIC"."CLIENT_ACCOUNT" ADD CONSTRAINT "PUBLIC"."UK1OJ1GE9EBF1TQAKKGQ9ESIRQX" UNIQUE NULLS DISTINCT ("LOGIN");  
ALTER TABLE "PUBLIC"."CLIENT_ACCOUNT" ADD CONSTRAINT "PUBLIC"."UKK3JE210X66LMDXA1LT5VH9CYI" UNIQUE NULLS DISTINCT ("LEGAL_ENTITY_NUMBER");    
ALTER TABLE "PUBLIC"."CLIENT_ACCOUNT_SCOPE" ADD CONSTRAINT "PUBLIC"."FKQPKWQK76XO5HMY9S3GAB0DBNQ" FOREIGN KEY("CLIENT_ACCOUNT_ID") REFERENCES "PUBLIC"."CLIENT_ACCOUNT"("ID") NOCHECK;        
ALTER TABLE "PUBLIC"."TRANSACTION_ACCOUNT" ADD CONSTRAINT "PUBLIC"."FKOKS4YBF1H8VJWP88322YQY2QO" FOREIGN KEY("CLIENT_ACCOUNT_ID") REFERENCES "PUBLIC"."CLIENT_ACCOUNT"("ID") NOCHECK;         
